{% extends "base.html" %}

{% block title %}Reset Instance{% endblock %}

{% block content %}
<header class="page-header">
    <p class="breadcrumb"><a href="{{ base_url }}/instance/{{ instance.id }}">‚Üê Back to instance</a></p>
    <h1>Reset instance</h1>
    <p>Force restart this instance immediately.</p>
</header>

<div class="warning-banner">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
        <line x1="12" y1="9" x2="12" y2="13"></line>
        <line x1="12" y1="17" x2="12.01" y2="17"></line>
    </svg>
    <div>
        <h2>Warning: Forced restart</h2>
        <p>Resetting the instance is equivalent to unplugging the power. This may cause data loss or corruption. Use power off for a graceful shutdown.</p>
    </div>
</div>

<section>
    <fieldset>
        <legend>Instance details</legend>
        <dl>
            <div>
                <dt>Hostname</dt>
                <dd><strong>{{ instance.hostname }}</strong></dd>
            </div>
            <div>
                <dt>Instance ID</dt>
                <dd><code>{{ instance.id }}</code></dd>
            </div>
            <div>
                <dt>Current status</dt>
                <dd>{{ instance.status }}</dd>
            </div>
            </dl>
        </fieldset>
    </section>

    {% if is_disabled %}
    <div>
        <div>
            <h2>Instance locked</h2>
            <p>Actions are disabled for this instance.</p>
        </div>
    </div>
    <form method="post" action="{{ base_url }}/instance/{{ instance.id }}/reset">
        <button type="button" disabled>Confirm Restart</button>
        <a href="{{ base_url }}/instance/{{ instance.id }}">Cancel</a>
    </form>
    {% else %}
    <form method="post" action="{{ base_url }}/instance/{{ instance.id }}/reset">
        <button type="submit">Confirm Restart</button>
        <a class="button-secondary" href="{{ base_url }}/instance/{{ instance.id }}">Cancel</a>
    </form>
    {% endif %}
            <div>
                <dt>Region</dt>
                <dd>{{ instance.region }}</dd>
            </div>
        </dl>
    </fieldset>

    {% if is_disabled %}
    <form method="post">
        <footer>
            <a href="{{ base_url }}/instance/{{ instance.id }}">Cancel</a>
            <button type="button" disabled>Reset instance</button>
        </footer>
    </form>
    {% else %}
    <form method="post">
        <footer class="form-actions">
            <a class="button-secondary" href="{{ base_url }}/instance/{{ instance.id }}">Cancel</a>
            <button type="submit" class="button-danger">Reset instance</button>
        </footer>
    </form>
    {% endif %}
</section>
{% endblock %}
