{% extends "base.html" %}

{% block title %}{{ hostname }}{% endblock %}

{% block content %}
<header>
    <h1>{{ hostname }}</h1>
    <p>Instance ID: <code>{{ instance_id }}</code></p>
</header>

<section>
    <dl>
    {% for kv in details %}
        <div>
            <dt>{{ kv.0 }}</dt>
            <dd>{{ kv.1 }}</dd>
        </div>
    {% endfor %}
    </dl>
</section>
    <section>
        <h2>Actions</h2>
        {% if disabled_by_env %}
        <div class="warning-banner">
            <div>
                <h2>Instance locked</h2>
                <p>Actions are disabled for this instance via environment configuration (blacklisted ID).</p>
            </div>
        </div>
        {% endif %}

        {% if disabled_by_host %}
        <div class="warning-banner">
            <div>
                <h2>Host mismatch</h2>
                <p>Actions are disabled because this instance's hostname matches the application server's hostname.</p>
            </div>
        </div>
        {% endif %}

        {% if disabled_by_env || disabled_by_host %}
        <div>
            <span>Power On</span>
            <span>Power Off</span>
            <span>Reset</span>
            <span>Change OS</span>
            <span>Resize</span>
            <span>Change Password</span>
            <span>Delete</span>
        </div>
        {% else %}
        <div>
            <a href="{{ base_url }}/confirm/power-on-instance/{{ instance_id }}">Power On</a>
            <a href="{{ base_url }}/confirm/power-off-instance/{{ instance_id }}">Power Off</a>
            <a href="{{ base_url }}/confirm/reset-instance/{{ instance_id }}">Reset</a>
            <a href="{{ base_url }}/instance/{{ instance_id }}/change-os">Change OS</a>
            <a href="{{ base_url }}/instance/{{ instance_id }}/resize">Resize</a>
            <a href="{{ base_url }}/instance/{{ instance_id }}/change-pass">Change Password</a>
            <a href="{{ base_url }}/confirm/delete-instance/{{ instance_id }}">Delete</a>
        </div>
        {% endif %}
    </section>
{% endblock %}