{% extends "base.html" %}

{% block title %}{{ hostname }}{% endblock %}

{% block content %}
<header>
    <h1>{{ hostname }}</h1>
    <p>Instance ID: <code>{{ instance_id }}</code></p>
</header>

<section>
    <dl>
    {% for kv in details %}
        <div>
            <dt>{{ kv.0 }}</dt>
            <dd>
                {% if kv.0 == "Status" %}
                    <span class="status-badge status-{{ status|lower }}">
                        {{ kv.1 }}
                    </span>
                {% else %}
                    {{ kv.1 }}
                {% endif %}
            </dd>
        </div>
    {% endfor %}
    </dl>
</section>
    <section data-instance-actions>
        <h2>Actions</h2>
        {% if disabled_by_env %}
        <div class="warning-banner">
            <div>
                <h2>Instance locked</h2>
                <p>Actions are disabled for this instance via environment configuration (blacklisted ID).</p>
            </div>
        </div>
        {% endif %}

        {% if disabled_by_host %}
        <div class="warning-banner">
            <div>
                <h2>Host mismatch</h2>
                <p>Actions are disabled because this instance's hostname matches the application server's hostname.</p>
            </div>
        </div>
        {% endif %}

        {% if disabled_by_env || disabled_by_host %}
        <div class="action-grid">
            <span class="btn btn-secondary btn-disabled">Power On</span>
            <span class="btn btn-secondary btn-disabled">Power Off</span>
            <span class="btn btn-secondary btn-disabled">Reset</span>
            <span class="btn btn-secondary btn-disabled">Resize</span>
            <span class="btn btn-secondary btn-disabled">Change Password</span>
            <span class="btn btn-secondary btn-disabled">Change OS</span>
            <span class="btn btn-secondary btn-disabled">Create Snapshot</span>
            <span class="btn btn-secondary btn-disabled">Delete</span>
        </div>
        {% else %}
        <div class="action-grid">
            <a href="{{ base_url }}/confirm/power-on-instance/{{ instance_id }}" class="btn btn-secondary">Power On</a>
            <a href="{{ base_url }}/confirm/power-off-instance/{{ instance_id }}" class="btn btn-secondary">Power Off</a>
            <a href="{{ base_url }}/confirm/reset-instance/{{ instance_id }}" class="btn btn-secondary">Reset</a>
            <a href="{{ base_url }}/instance/{{ instance_id }}/resize" class="btn btn-secondary">Resize</a>
            <a href="{{ base_url }}/instance/{{ instance_id }}/change-pass" class="btn btn-secondary">Change Password</a>
            <a href="{{ base_url }}/instance/{{ instance_id }}/change-os" class="btn btn-secondary">Change OS</a>
            <a href="{{ base_url }}/confirm/create-snapshot/{{ instance_id }}" class="btn btn-secondary">Create Snapshot</a>
            <a href="{{ base_url }}/confirm/delete-instance/{{ instance_id }}" class="btn btn-secondary">Delete</a>
        </div>
        {% endif %}
    </section>
{% endblock %}