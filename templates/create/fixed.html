{% extends "base.html" %}

{% block title %}Create · Step 3{% endblock %}

{% block content %}
<header class="page-header">
    <p class="breadcrumb"><a href="{{ back_url }}">← Previous step</a></p>
    <h1>Select a product</h1>
    <p>Step 3 of 7 · Choose a plan for {{ region_name }}</p>
</header>

{% if has_products %}
<form method="get" action="{{ submit_url }}" class="surface" novalidate>
    {% for host in base_state.hostnames %}
    <input type="hidden" name="hostnames" value="{{ host }}">
    {% endfor %}
    <input type="hidden" name="region" value="{{ base_state.region }}">
    <input type="hidden" name="instance_class" value="{{ base_state.instance_class }}">
    <input type="hidden" name="plan_type" value="{{ base_state.plan_type }}">
    <input type="hidden" name="assign_ipv4" value="{% if base_state.assign_ipv4 %}1{% else %}0{% endif %}">
    <input type="hidden" name="assign_ipv6" value="{% if base_state.assign_ipv6 %}1{% else %}0{% endif %}">
    <input type="hidden" name="floating_ip_count" value="{{ floating_ip_count }}">
    {% for key_id in base_state.ssh_key_ids %}
    <input type="hidden" name="ssh_key_ids" value="{{ key_id }}">
    {% endfor %}
    <fieldset>
        <legend>Plans for {{ region_name }}</legend>
        <div class="product-grid" role="list">
            {% for product in products %}
            <label class="product-card" role="listitem" {% if selected_product_id == product.id %}aria-current="true"{% endif %}>
                <input type="radio" name="product_id" value="{{ product.id }}" {% if selected_product_id == product.id %}checked{% endif %}>
                <div class="product-card-body">
                    <h2>{{ product.name }}</h2>
                    {% if !product.description.is_empty() %}
                    <p>{{ product.description }}</p>
                    {% endif %}
                    {% if !product.spec_entries.is_empty() %}
                    <dl>
                        {% for entry in product.spec_entries %}
                        <div>
                            <dt>{{ entry.term }}</dt>
                            <dd>{{ entry.value }}</dd>
                        </div>
                        {% endfor %}
                    </dl>
                    {% endif %}
                    {% if !product.price_entries.is_empty() %}
                    <dl class="pricing">
                        {% for entry in product.price_entries %}
                        <div>
                            <dt>{{ entry.term }}</dt>
                            <dd>{{ entry.value }}</dd>
                        </div>
                        {% endfor %}
                    </dl>
                    {% endif %}
                    {% if !product.tags.is_empty() %}
                    <footer>
                        <p>{{ product.tags }}</p>
                    </footer>
                    {% endif %}
                </div>
            </label>
            {% endfor %}
        </div>
    </fieldset>

    <footer class="form-actions">
        <button type="submit">Continue</button>
    </footer>
</form>
{% else %}
<section class="surface">
    <p>No products were returned for the selected region. <a href="{{ restart_url }}">Go back</a> to pick another region.</p>
</section>
{% endif %}
{% endblock %}
